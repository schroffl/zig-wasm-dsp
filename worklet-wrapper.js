window["worklet-wrapper"] = "bGV0IGluc3RhbmNlID0gdW5kZWZpbmVkOwoKZnVuY3Rpb24gZ2V0U3RyaW5nKGluc3QsIHB0ciwgbGVuKSB7CiAgICBjb25zdCBzbGljZSA9IGRlcmVmKFVpbnQ4QXJyYXksIGluc3QsIHB0ciwgbGVuKTsKICAgIGxldCBhcnIgPSBbXTsKCiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNsaWNlLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgY29uc3QgY2hhciA9IFN0cmluZy5mcm9tQ2hhckNvZGUoc2xpY2VbaV0pOwogICAgICAgIGFyci5wdXNoKGNoYXIpOwogICAgfQoKICAgIHJldHVybiBhcnIuam9pbignJyk7Cn0KCmZ1bmN0aW9uIGRlcmVmKFQsIGluc3QsIHB0ciwgbGVuKSB7CiAgICByZXR1cm4gbmV3IFQoaW5zdC5leHBvcnRzLm1lbW9yeS5idWZmZXIsIHB0ciwgbGVuKTsKfQoKY2xhc3MgWmlnV2FzbVByb2Nlc3NvciBleHRlbmRzIEF1ZGlvV29ya2xldFByb2Nlc3NvciB7CgogICAgY29uc3RydWN0b3IoKSB7CiAgICAgICAgc3VwZXIoKTsKICAgICAgICB0aGlzLnBvcnQub25tZXNzYWdlID0gdGhpcy5vbk1lc3NhZ2UuYmluZCh0aGlzKTsKICAgIH0KCiAgICBzdGF0aWMgZ2V0IHBhcmFtZXRlckRlc2NyaXB0b3JzKCkgewogICAgICAgIHJldHVybiBbewogICAgICAgICAgICBuYW1lOiAnbWlkU2lkZUJhbGFuY2UnLAogICAgICAgICAgICBkZWZhdWx0VmFsdWU6IDAsCiAgICAgICAgICAgIG1pblZhbHVlOiAtMSwKICAgICAgICAgICAgbWF4VmFsdWU6IDEsCiAgICAgICAgICAgIGF1dG9tYXRpb25SYXRlOiAnYS1yYXRlJywKICAgICAgICB9XTsKICAgIH0KCiAgICBpbml0V2FzbShiaW5hcnkpIHsKICAgICAgICBjb25zdCBfdGhpcyA9IHRoaXM7CgogICAgICAgIFdlYkFzc2VtYmx5Lmluc3RhbnRpYXRlKGJpbmFyeSwgewogICAgICAgICAgICBkZWJ1ZzogewogICAgICAgICAgICAgICAganNfbG9nOiBmdW5jdGlvbihidWYsIGxlbikgewogICAgICAgICAgICAgICAgICAgIGNvbnN0IHN0ciA9IGdldFN0cmluZyhfdGhpcy53YXNtSW5zdGFuY2UsIGJ1ZiwgbGVuKTsKICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhzdHIpOwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGpzX2VycjogZnVuY3Rpb24oYnVmLCBsZW4pIHsKICAgICAgICAgICAgICAgICAgICBjb25zdCBzdHIgPSBnZXRTdHJpbmcoX3RoaXMud2FzbUluc3RhbmNlLCBidWYsIGxlbik7CiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihzdHIpOwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgfSwKICAgICAgICB9KS50aGVuKGluc3QgPT4gewogICAgICAgICAgICBpbnN0Lmluc3RhbmNlLmV4cG9ydHMuanNfZ2V0UGFyYW1CdWZmZXIoMSk7CgogICAgICAgICAgICB0aGlzLndhc21JbnN0YW5jZSA9IGluc3QuaW5zdGFuY2U7CiAgICAgICAgfSk7CiAgICB9CgogICAgb25NZXNzYWdlKGV2ZW50KSB7CiAgICAgICAgc3dpdGNoIChldmVudC5kYXRhLnR5cGUpIHsKICAgICAgICAgICAgY2FzZSAnd2FzbS1iaW5hcnknOiB7CiAgICAgICAgICAgICAgICB0aGlzLmluaXRXYXNtKGV2ZW50LmRhdGEuZGF0YSk7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQogICAgICAgICAgICBjYXNlICdzZXQtcGFyYW0nOiB7CiAgICAgICAgICAgICAgICB0aGlzLnNldFBhcmFtKGV2ZW50LmRhdGEubmFtZSwgZXZlbnQuZGF0YS52YWx1ZSk7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KCiAgICBzZXRQYXJhbShuYW1lLCB2YWx1ZSkgewogICAgICAgIGNvbnN0IGluc3QgPSB0aGlzLndhc21JbnN0YW5jZTsKICAgICAgICBpZiAoIWluc3QpIHJldHVybjsKCiAgICAgICAgY29uc3QgcGFyYW1fcHRyID0gaW5zdC5leHBvcnRzLmpzX2dldFBhcmFtQnVmZmVyKDEpOwogICAgICAgIGNvbnN0IHBhcmFtX2J1ZmZlciA9IGRlcmVmKEZsb2F0MzJBcnJheSwgaW5zdCwgcGFyYW1fcHRyLCAxKTsKCiAgICAgICAgc3dpdGNoIChuYW1lKSB7CiAgICAgICAgICAgIGNhc2UgJ21pZC1zaWRlLWJhbGFuY2UnOiBwYXJhbV9idWZmZXJbMF0gPSB2YWx1ZTsgYnJlYWs7CiAgICAgICAgfQogICAgfQoKICAgIHByb2Nlc3MoaW5wdXRzLCBvdXRwdXRzLCBwYXJhbXMpIHsKICAgICAgICBjb25zdCBpbnN0ID0gdGhpcy53YXNtSW5zdGFuY2U7CiAgICAgICAgdGhpcy5mcmFtZV9jb3VudCA9IHRoaXMuZnJhbWVfY291bnQgfHwgMDsKCiAgICAgICAgaWYgKCFpbnN0IHx8IGlucHV0cy5sZW5ndGggPT0gMCB8fCBpbnB1dHNbMF0ubGVuZ3RoID09IDApIHsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfQoKICAgICAgICBjb25zdCBudW1fY2hhbm5lbHMgPSBvdXRwdXRzWzBdLmxlbmd0aDsKICAgICAgICBjb25zdCBudW1fZnJhbWVzID0gb3V0cHV0c1swXVswXS5sZW5ndGg7CiAgICAgICAgY29uc3QgbnVtX3NhbXBsZXMgPSBudW1fY2hhbm5lbHMgKiBudW1fZnJhbWVzOwoKICAgICAgICBjb25zdCBpbnB1dF9wdHIgPSBpbnN0LmV4cG9ydHMuanNfZ2V0SW5wdXRCdWZmZXIobnVtX3NhbXBsZXMpOwogICAgICAgIGNvbnN0IGlucHV0X2J1ZmZlciA9IGRlcmVmKEZsb2F0MzJBcnJheSwgaW5zdCwgaW5wdXRfcHRyLCBudW1fc2FtcGxlcyk7CgogICAgICAgIGlmIChpbnB1dHNbMF0ubGVuZ3RoID09IDEpIHsKICAgICAgICAgICAgaW5wdXRfYnVmZmVyLnNldChpbnB1dHNbMF1bMF0sIDApOwogICAgICAgICAgICBpbnB1dF9idWZmZXIuc2V0KGlucHV0c1swXVswXSwgbnVtX2ZyYW1lcyk7CiAgICAgICAgfSBlbHNlIGlmIChpbnB1dHNbMF0ubGVuZ3RoID09IDIpIHsKICAgICAgICAgICAgaW5wdXRfYnVmZmVyLnNldChpbnB1dHNbMF1bMF0sIDApOwogICAgICAgICAgICBpbnB1dF9idWZmZXIuc2V0KGlucHV0c1swXVsxXSwgbnVtX2ZyYW1lcyk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgY29uc29sZS53YXJuKCJTb21lIGlucHV0IGNoYW5uZWxzIHdlcmUgaWdub3JlZCIpOwogICAgICAgIH0KCiAgICAgICAgLy8gY29uc3QgbXNfYmFsYW5jZV92YWx1ZXMgPSBwYXJhbXMubWlkU2lkZUJhbGFuY2U7CiAgICAgICAgLy8gY29uc3QgbXNfYmFsYW5jZV9wdHIgPSBpbnN0LmV4cG9ydHMuanNfZ2V0UGFyYW1CdWZmZXIobXNfYmFsYW5jZV92YWx1ZXMubGVuZ3RoKTsKICAgICAgICAvLyBjb25zdCBtc19iYWxhbmNlX2J1ZmZlciA9IGRlcmVmKEZsb2F0MzJBcnJheSwgaW5zdCwgbXNfYmFsYW5jZV9wdHIsIG1zX2JhbGFuY2VfdmFsdWVzLmxlbmd0aCk7CiAgICAgICAgLy8gbXNfYmFsYW5jZV9idWZmZXIuc2V0KG1zX2JhbGFuY2VfdmFsdWVzLCAwKTsKCiAgICAgICAgY29uc3Qgb3V0cHV0X3B0ciA9IGluc3QuZXhwb3J0cy5qc19wcm9jZXNzKG51bV9mcmFtZXMsIDEpOwogICAgICAgIGNvbnN0IG91dHB1dF9idWZmZXIgPSBkZXJlZihGbG9hdDMyQXJyYXksIGluc3QsIG91dHB1dF9wdHIsIG51bV9mcmFtZXMgKiBudW1fY2hhbm5lbHMpOwoKICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG51bV9jaGFubmVsczsgaSsrKSB7CiAgICAgICAgICAgIGNvbnN0IHJhd19pZHggPSBpICogbnVtX2ZyYW1lczsKICAgICAgICAgICAgY29uc3Qgc291cmNlID0gb3V0cHV0X2J1ZmZlci5zbGljZShyYXdfaWR4LCByYXdfaWR4ICsgbnVtX2ZyYW1lcyk7CiAgICAgICAgICAgIG91dHB1dHNbMF1baV0uc2V0KHNvdXJjZSwgMCk7CiAgICAgICAgfQoKICAgICAgICB0aGlzLnBvcnQucG9zdE1lc3NhZ2Uob3V0cHV0c1swXSk7CgogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKfQoKcmVnaXN0ZXJQcm9jZXNzb3IoJ3ppZy13YXNtJywgWmlnV2FzbVByb2Nlc3Nvcik7Cg==";
